---
/**
 * ProfilePicture Component
 * Editorial-style profile picture with elegant framing and subtle animations
 *
 * Design direction: Refined editorial magazine aesthetic with:
 * - Elegant asymmetric framing with accent line
 * - Subtle depth through layered shadows
 * - Graceful hover animation
 * - Monochrome with accent color highlight
 */

interface Props {
  src: string;
  alt: string;
  size?: 'small' | 'medium' | 'large';
  class?: string;
}

const {
  src,
  alt,
  size = 'medium',
  class: className,
} = Astro.props;

// Size mappings
const sizes = {
  small: { width: 120, height: 150 },
  medium: { width: 180, height: 225 },
  large: { width: 240, height: 300 },
};

const { width, height } = sizes[size];
---

<figure class:list={['profile-picture', `profile-picture--${size}`, className]}>
  <div class="profile-frame">
    <div class="profile-accent"></div>
    <div class="profile-image-wrapper">
      <img
        src={src}
        alt={alt}
        width={width}
        height={height}
        loading="eager"
        decoding="async"
      />
    </div>
  </div>
</figure>

<style>
  .profile-picture {
    margin: 0;
    position: relative;
  }

  .profile-frame {
    position: relative;
    display: inline-block;
  }

  /* Accent line - editorial asymmetric element */
  .profile-accent {
    position: absolute;
    top: -8px;
    left: -8px;
    width: 40%;
    height: 40%;
    border-left: 2px solid var(--color-accent);
    border-top: 2px solid var(--color-accent);
    opacity: 0.8;
    transition: all var(--transition-normal);
    pointer-events: none;
  }

  .profile-picture:hover .profile-accent {
    width: 50%;
    height: 50%;
    opacity: 1;
  }

  .profile-image-wrapper {
    position: relative;
    overflow: hidden;
    background: var(--color-bg-alt);
    /* Subtle multi-layered shadow for depth */
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.08),
      0 8px 24px rgba(0, 0, 0, 0.06),
      0 16px 48px rgba(0, 0, 0, 0.04);
    transition: all var(--transition-normal);
  }

  .profile-picture:hover .profile-image-wrapper {
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.1),
      0 12px 32px rgba(0, 0, 0, 0.08),
      0 24px 64px rgba(0, 0, 0, 0.06);
    transform: translateY(-2px);
  }

  .profile-image-wrapper img {
    display: block;
    width: 100%;
    height: auto;
    object-fit: cover;
    /* Subtle grayscale with accent tint for editorial feel */
    filter: grayscale(15%) contrast(1.02);
    transition: filter var(--transition-normal);
  }

  .profile-picture:hover .profile-image-wrapper img {
    filter: grayscale(0%) contrast(1.05);
  }

  /* Size variants */
  .profile-picture--small .profile-image-wrapper {
    width: 120px;
  }

  .profile-picture--medium .profile-image-wrapper {
    width: 180px;
  }

  .profile-picture--large .profile-image-wrapper {
    width: 240px;
  }

  /* Dark mode adjustments */
  [data-theme="dark"] .profile-image-wrapper {
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.2),
      0 8px 24px rgba(0, 0, 0, 0.15),
      0 16px 48px rgba(0, 0, 0, 0.1);
  }

  [data-theme="dark"] .profile-picture:hover .profile-image-wrapper {
    box-shadow:
      0 4px 12px rgba(0, 0, 0, 0.25),
      0 12px 32px rgba(0, 0, 0, 0.2),
      0 24px 64px rgba(0, 0, 0, 0.15);
  }

  /* Responsive sizing */
  @media (max-width: 768px) {
    .profile-picture--large .profile-image-wrapper {
      width: 160px;
    }

    .profile-picture--medium .profile-image-wrapper {
      width: 140px;
    }

    .profile-accent {
      top: -6px;
      left: -6px;
      width: 35%;
      height: 35%;
    }
  }

  @media (max-width: 480px) {
    .profile-picture--large .profile-image-wrapper,
    .profile-picture--medium .profile-image-wrapper {
      width: 120px;
    }

    .profile-accent {
      top: -5px;
      left: -5px;
      width: 30%;
      height: 30%;
    }

    .profile-picture:hover .profile-accent {
      width: 40%;
      height: 40%;
    }
  }
</style>
