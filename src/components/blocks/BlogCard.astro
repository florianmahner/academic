---
/**
 * BlogCard Component
 * Display blog post preview in list.
 * Composes MediaCard primitive with blog-specific additions.
 */
import MediaCard from '../primitives/MediaCard.astro';
import { formatDate } from '../../lib/date-utils';
import Badge from '../ui/Badge.astro';

interface Props {
  title: string;
  description?: string;
  date: Date;
  tags?: string[];
  slug: string;
  image?: string;
  class?: string;
}

const {
  title,
  description,
  date,
  tags = [],
  slug,
  image,
  class: className,
} = Astro.props;

const href = `/blog/${slug}`;
---

<MediaCard
  image={image}
  imageAlt={title}
  title={title}
  href={href}
  class:list={['blog-card', className]}
>
  <Fragment slot="meta">
    <time datetime={date.toISOString()}>{formatDate(date)}</time>
  </Fragment>

  <Fragment slot="description">
    {description}
  </Fragment>

  <Fragment slot="links">
    {tags.length > 0 && (
      <div class="blog-tags">
        {tags.slice(0, 3).map(tag => (
          <Badge size="sm">{tag}</Badge>
        ))}
      </div>
    )}
  </Fragment>
</MediaCard>

<style>
  .blog-tags {
    display: flex;
    gap: var(--space-2);
    flex-wrap: wrap;
  }
</style>
