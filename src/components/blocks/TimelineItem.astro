---
/**
 * TimelineItem Component
 * Display experience/education in timeline format
 */

interface Props {
  title: string;
  subtitle: string;
  location?: string;
  startDate: string;
  endDate?: string;
  description?: string;
  highlights?: string[];
  class?: string;
}

const {
  title,
  subtitle,
  location,
  startDate,
  endDate,
  description,
  highlights = [],
  class: className,
} = Astro.props;

const dateRange = endDate ? `${startDate} — ${endDate}` : startDate;
---

<div class:list={['timeline-item', className]}>
  <div class="timeline-marker"></div>
  <div class="timeline-content">
    <div class="timeline-header">
      <h3 class="timeline-title">{title}</h3>
      <span class="timeline-date">{dateRange}</span>
    </div>
    <div class="timeline-subtitle">
      {subtitle}
      {location && <span class="timeline-location"> · {location}</span>}
    </div>
    {description && <p class="timeline-description">{description}</p>}
    {highlights.length > 0 && (
      <ul class="timeline-highlights">
        {highlights.map(item => <li>{item}</li>)}
      </ul>
    )}
  </div>
</div>

<style>
  .timeline-item {
    display: flex;
    gap: var(--space-4);
    padding-bottom: var(--space-6);
    position: relative;
  }

  .timeline-item:not(:last-child)::before {
    content: '';
    position: absolute;
    left: 5px;
    top: 16px;
    bottom: 0;
    width: 2px;
    background-color: var(--color-border);
  }

  .timeline-marker {
    flex-shrink: 0;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: var(--color-accent);
    margin-top: 4px;
  }

  .timeline-content {
    flex: 1;
    min-width: 0;
  }

  .timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    gap: var(--space-2);
    flex-wrap: wrap;
    margin-bottom: var(--space-1);
  }

  .timeline-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    margin: 0;
  }

  .timeline-date {
    font-size: var(--font-size-xs);
    font-family: var(--font-mono);
    color: var(--color-text-muted);
    white-space: nowrap;
  }

  .timeline-subtitle {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin-bottom: var(--space-2);
  }

  .timeline-location {
    color: var(--color-text-muted);
  }

  .timeline-description {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin: 0 0 var(--space-2);
    line-height: var(--line-height-normal);
  }

  .timeline-highlights {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin: 0;
    padding-left: var(--space-4);
  }

  .timeline-highlights li {
    margin-bottom: var(--space-1);
  }
</style>
