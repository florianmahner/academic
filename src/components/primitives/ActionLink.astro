---
/**
 * ActionLink Primitive
 *
 * Simple, consistent external link with icon.
 * Use for PDF, Code, Web, GitHub links everywhere.
 *
 * @prop href - Link URL
 * @prop label - Link text (e.g., "PDF", "Code", "Web")
 * @prop icon - Icon type: 'external' | 'code' | 'github' | 'slides' | 'video'
 * @prop class - Additional CSS classes
 */

interface Props {
  href: string;
  label: string;
  icon?: 'external' | 'globe' | 'code' | 'github' | 'slides' | 'video';
  class?: string;
}

const { href, label, icon = 'external', class: className } = Astro.props;

// SVG paths for icons (24x24 viewBox)
const icons: Record<string, string> = {
  // External arrow (for PDF, links)
  external: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6M15 3h6v6M10 14L21 3',
  // Globe (for Web)
  globe: 'M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zM2 12h20M12 2a15 15 0 0 1 4 10 15 15 0 0 1-4 10 15 15 0 0 1-4-10 15 15 0 0 1 4-10z',
  // Code brackets
  code: 'M16 18l6-6-6-6M8 6l-6 6 6 6',
  // GitHub
  github: 'M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22',
  // Slides/presentation
  slides: 'M2 3h20v14H2zM8 21h8M12 17v4',
  // Video/play
  video: 'M5 3l14 9-14 9V3z',
};
---

<a
  href={href}
  class:list={['action-link', className]}
  target="_blank"
  rel="noopener noreferrer"
>
  <svg
    class="action-link-icon"
    width="12"
    height="12"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    aria-hidden="true"
  >
    <path d={icons[icon]} />
  </svg>
  <span class="action-link-label">{label}</span>
</a>

<style>
  .action-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    font-size: var(--font-size-xs);
    font-family: var(--font-body);
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .action-link:hover {
    color: var(--color-accent);
  }

  .action-link-icon {
    flex-shrink: 0;
  }

  .action-link-label {
    white-space: nowrap;
  }
</style>
