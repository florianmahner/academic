---
/**
 * ViewLinks Primitive
 *
 * Collection of action links for external resources.
 * Uses ActionLink primitive for consistent styling.
 *
 * @prop links - Array of link objects with label and url
 * @prop class - Additional CSS classes
 */

import ActionLink from './ActionLink.astro';

interface Link {
  label: string;
  url: string;
}

interface Props {
  links: Link[];
  style?: 'icons' | 'text' | 'both'; // kept for backwards compat, ignored
  class?: string;
}

const { links, class: className } = Astro.props;

// Filter out empty links
const validLinks = links.filter(link => link.url);

// Determine icon type based on label
function getIconType(label: string): 'external' | 'globe' | 'code' | 'github' | 'slides' | 'video' {
  const lower = label.toLowerCase();
  if (lower.includes('code') || lower.includes('github')) return 'code';
  if (lower.includes('slides')) return 'slides';
  if (lower.includes('video')) return 'video';
  if (lower.includes('web') || lower.includes('website') || lower.includes('demo')) return 'globe';
  return 'external';
}
---

{validLinks.length > 0 && (
  <div class:list={['view-links', className]}>
    {validLinks.map(link => (
      <ActionLink
        href={link.url}
        label={link.label}
        icon={getIconType(link.label)}
      />
    ))}
  </div>
)}

<style>
  .view-links {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
  }
</style>
