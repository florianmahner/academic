---
/**
 * ViewTags Primitive
 *
 * Minimal tag pills - subtle but clearly tags.
 *
 * @prop tags - Array of tag strings
 * @prop limit - Maximum tags to show (rest shown as "+N more")
 * @prop class - Additional CSS classes
 */

interface Props {
  tags: string[];
  limit?: number;
  style?: string; // kept for backwards compat, ignored
  class?: string;
}

const { tags, limit, class: className } = Astro.props;

// Limit tags if specified
const visibleTags = limit ? tags.slice(0, limit) : tags;
const hiddenCount = limit ? Math.max(0, tags.length - limit) : 0;
---

{tags.length > 0 && (
  <div class:list={['view-tags', className]}>
    {visibleTags.map(tag => (
      <span class="view-tag">{tag}</span>
    ))}
    {hiddenCount > 0 && (
      <span class="view-tag view-tag--more">+{hiddenCount}</span>
    )}
  </div>
)}

<style>
  .view-tags {
    display: inline-flex;
    flex-wrap: wrap;
    gap: var(--space-2);
  }

  .view-tag {
    display: inline-block;
    font-size: var(--font-size-xs);
    font-family: var(--font-body);
    color: var(--color-text-muted);
    background: var(--color-bg-alt);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-full);
    white-space: nowrap;
  }

  .view-tag--more {
    font-style: italic;
    background: transparent;
  }
</style>
