---
import BaseLayout from '../layouts/BaseLayout.astro';
import Container from '../components/layout/Container.astro';
import CourseCard from '../components/blocks/CourseCard.astro';
import teachingData from '../content/teaching.json';
import { config } from '../config';
import { isSectionEnabled, DISABLED_SECTION_REDIRECT } from '../lib/sections';

// Redirect if section is disabled
if (!isSectionEnabled('teaching')) {
  return Astro.redirect(DISABLED_SECTION_REDIRECT);
}

const title = `Teaching | ${config.site.title}`;
const courses = teachingData.courses;
---

<BaseLayout title={title} description="Teaching and courses">
  <article class="teaching-page">
    <Container>
      <header class="page-header" data-animate="fade-up">
        <h1>Teaching</h1>
        <p class="lead">Courses and teaching experience.</p>
      </header>

      <div class="courses-list" data-animate="stagger">
        {courses.map(course => (
          <CourseCard
            title={course.title}
            role={course.role}
            institution={course.institution}
            semester={course.semester}
            description={course.description}
            materials={course.materials}
          />
        ))}
      </div>
    </Container>
  </article>
</BaseLayout>

<style>
  .teaching-page {
    padding: var(--space-8) 0;
  }

  .lead {
    font-size: var(--font-size-lg);
    color: var(--color-text-secondary);
    margin-top: var(--space-2);
  }

  .courses-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    margin-top: var(--space-8);
  }
</style>
