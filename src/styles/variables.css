/* ==========================================================================
   CSS Custom Properties (Variables)
   Tufte-inspired design system
   ========================================================================== */

:root {
  /* ==========================================================================
     DESIGN SCALE SYSTEM
     Scale factors are injected from config.yaml via ThemeStyles.astro
     --typography-scale: multiplier for all font sizes (default: 1)
     --spacing-scale: multiplier for all spacing values (default: 1)
     ========================================================================== */

  /* Base font size - scaled by typography factor */
  font-size: calc(16px * var(--typography-scale, 1));

  /* Typography Scale - optimized for 900px width with serif fonts */
  /* These use rem, so they automatically scale with the root font-size */
  --font-size-xs: clamp(0.8rem, 0.75rem + 0.25vw, 0.9rem);
  --font-size-sm: clamp(0.95rem, 0.9rem + 0.3vw, 1.1rem);
  --font-size-base: clamp(1.1rem, 1.05rem + 0.4vw, 1.25rem);
  --font-size-lg: clamp(1.25rem, 1.15rem + 0.5vw, 1.4rem);
  --font-size-xl: clamp(1.4rem, 1.25rem + 0.7vw, 1.65rem);
  --font-size-2xl: clamp(1.65rem, 1.45rem + 1vw, 2.15rem);
  --font-size-3xl: clamp(2.15rem, 1.85rem + 1.5vw, 2.75rem);
  --font-size-4xl: clamp(2.75rem, 2.25rem + 2.5vw, 3.8rem);

  /* ============================================================
     FONTS - Controlled by Typography Presets System
     See: src/lib/typography-presets.ts for preset definitions
     See: src/components/ThemeStyles.astro for default loading
     See: src/components/SettingsPanel.astro for runtime switching

     DO NOT hardcode fonts here - they will conflict with presets!
     ============================================================ */

  /* ============================================================
     TYPOGRAPHY HIERARCHY - Consistent Visual Language

     FONT FAMILY ASSIGNMENT:
     • --font-body: All readable text (titles, descriptions, prose)
     • --font-heading: Display headings only (h1, hero text)
     • --font-ui: Meta elements (dates, venues, badges, nav, buttons)
     • --font-mono: Code blocks and inline code ONLY

     CARD TYPOGRAPHY PATTERN:
     • Meta (date/venue): font-size-xs, font-ui, text-muted
     • Title: font-size-base, font-body, font-weight-medium
     • Description: font-size-sm, font-body, text-secondary
     • Links: font-size-sm, font-ui
     ============================================================ */

  /* Font Weights - using extremes for impact (300 vs 700) */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Line Heights - Desktop */
  --line-height-tight: 1.2;
  --line-height-snug: 1.35;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.65;
  --line-height-loose: 1.8;

  /* Letter Spacing */
  --letter-spacing-tighter: -0.03em;
  --letter-spacing-tight: -0.02em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.025em;
  --letter-spacing-wider: 0.05em;

  /* Word Spacing */
  --word-spacing-tight: -0.02em;
  --word-spacing-normal: 0;
  --word-spacing-wide: 0.05em;

  /* ============================================================
     MOBILE TYPOGRAPHY SCALE
     Principled approach based on:
     1. Optical sizing: smaller text needs more spacing
     2. Reading distance: phones held closer = larger apparent size
     3. Line length: narrower columns need adjusted line-height
     4. Touch targets: adequate spacing for readability
     ============================================================ */

  /* Mobile-specific line heights (applied via media query) */
  --line-height-tight-mobile: 1.25;
  --line-height-snug-mobile: 1.4;
  --line-height-normal-mobile: 1.55;
  --line-height-relaxed-mobile: 1.7;

  /* Mobile letter spacing (looser for smaller screens) */
  --letter-spacing-tight-mobile: -0.01em;
  --letter-spacing-normal-mobile: 0.005em;
  --letter-spacing-wide-mobile: 0.03em;

  /* Spacing Scale - multiplied by spacing-scale factor */
  --space-1: calc(0.25rem * var(--spacing-scale, 1));
  --space-2: calc(0.5rem * var(--spacing-scale, 1));
  --space-3: calc(0.75rem * var(--spacing-scale, 1));
  --space-4: calc(1rem * var(--spacing-scale, 1));
  --space-5: calc(1.25rem * var(--spacing-scale, 1));
  --space-6: calc(1.5rem * var(--spacing-scale, 1));
  --space-8: calc(2rem * var(--spacing-scale, 1));
  --space-10: calc(2.5rem * var(--spacing-scale, 1));
  --space-12: calc(3rem * var(--spacing-scale, 1));
  --space-16: calc(4rem * var(--spacing-scale, 1));
  --space-20: calc(5rem * var(--spacing-scale, 1));
  --space-24: calc(6rem * var(--spacing-scale, 1));

  /* Content Top Alignment - Single source of truth */
  --content-top-padding: 5rem;

  /* Layout - CUSTOMIZE THESE FOR YOUR PREFERRED WIDTH */
  --content-width: 70%;
  --content-max-width: 900px;        /* Balanced width for readability */
  --content-max-width-wide: 1050px;  /* For extra wide layouts */
  --sidenote-width: 300px;
  --margin-width: 400px;
  --full-width: 1400px;
  --container-padding: var(--space-6);

  /* Mobile-specific spacing overrides */
  --container-padding-mobile: var(--space-5);
  --content-top-padding-mobile: var(--space-10);

  /* Mobile breakpoint */
  --breakpoint-mobile: 768px;

  /* Tufte margins */
  --margin-left: 5%;
  --margin-right: 30%;

  /* Border Radius */
  --radius-sm: 2px;
  --radius-md: 4px;
  --radius-lg: 8px;
  --radius-full: 9999px;

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 250ms ease;
  --transition-slow: 350ms ease;

  /* Z-index layers */
  --z-base: 0;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-modal: 300;
  --z-tooltip: 400;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
  :root {
    --content-width: 65%;
    --margin-right: 20%;
  }
}

@media (max-width: 900px) {
  :root {
    --content-width: 90%;
    --margin-left: 5%;
    --margin-right: 5%;
  }
}

@media (max-width: 768px) {
  :root {
    --container-padding: var(--container-padding-mobile);
    --content-top-padding: var(--content-top-padding-mobile);
  }
}

@media (max-width: 480px) {
  :root {
    --container-padding: var(--space-4);
    --content-top-padding: var(--space-8);
  }
}
